<!DOCTYPE html>
<html>
<head>
  <title>blip1t - {{ house.name }}</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header style="display:flex; justify-content:center;">
  <img src="/static/logo.png" alt="Logo" style="height:80px; transform: translateX(10px);">
</header>

<main>
  <h1 style="text-align: center; margin-top: 20px;">{{ house.name }}</h1>

  <!-- Favorite button -->
  <!-- Favorite button -->
<div style="text-align: center; margin: -12px 0 10px 0;">
  <button id="fav-btn" style="
    display: inline-block;
    padding: 10px 15px;
    background-color: #e6cdbd;
    color: #101111;
    text-decoration: none;
    border-radius: 5px;
    font-family: 'Open Sans', sans-serif;
    font-weight: 550;
    font-size: 16px; /* match your new thread button */
    line-height: 1.2;
    border: none;
    cursor: pointer;
  ">
    ★ Favorite
  </button>
</div>


  <div style="text-align: center; margin: 20px 0;">
    <a href="/house/{{ house.id }}/thread/new" class="new-thread-button" style="display: inline-block; margin-top: 20px; padding: 10px 15px; background-color: #e6cdbd; color: #101111; text-decoration: none; border-radius: 5px; margin-top: 0px">New Thread</a>
  </div>

  <ul class="threads-list" style="text-align: center;">
    {% for t in threads %}
      <li style="margin-bottom: 10px;"><a href="/thread/{{ t.id }}">{{ t.title }}</a></li>
    {% else %}
      <li>No threads yet!</li>
    {% endfor %}
  </ul>

  <div style="text-align: center; margin-top: 20px;">
    <a href="/">Back</a>
  </div>
</main>

<script>
// localStorage favorites setup
const favKey = 'favoriteHouses';
let favorites = JSON.parse(localStorage.getItem(favKey) || '[]');
const houseId = '{{ house.id }}';
const favBtn = document.getElementById('fav-btn');

// initialize button text with colored symbol
if(favorites.includes(houseId)) {
  favBtn.innerHTML = '<span style="color: #386159;">★</span> Favorited';
} else {
  favBtn.innerHTML = '<span style="color: gray;">☆</span> Favorite';
}

// toggle favorite on click
favBtn.addEventListener('click', () => {
  if(favorites.includes(houseId)) {
    favorites = favorites.filter(id => id !== houseId);
    favBtn.innerHTML = '<span style="color: gray;">☆</span> Favorite';
  } else {
    favorites.push(houseId);
    favBtn.innerHTML = '<span style="color: #386159;">★</span> Favorited';
  }
  localStorage.setItem(favKey, JSON.stringify(favorites));
});
</script>

</body>
</html>
